AC_INIT(test-libglade.c)
AM_CONFIG_HEADER(config.h)

AM_INIT_AUTOMAKE(libglade, 0.16)
AM_MAINTAINER_MODE

dnl get the GNOME macros
AM_ACLOCAL_INCLUDE(macros)

AC_ARG_ENABLE(debug, [  --enable-debug             enable debugging output],,
  [enable_debug=no])

if test "x$enable_debug" != xno; then
  AC_DEFINE(DEBUG)
fi

AC_PROG_CC
AC_ISC_POSIX
AC_HEADER_STDC
AC_CHECK_HEADERS(unistd.h, AC_DEFINE(HAVE_UNISTD_H))

AC_ARG_PROGRAM

AM_PROG_LIBTOOL

AM_PATH_GTK_2_0(1.3.6)

AC_PATH_PROG(PKG_CONFIG, pkg-config, no)

AC_MSG_CHECKING(for libxml2)
if test "x$PKG_CONFIG" != xno && $PKG_CONFIG libxml-2.0; then
    XML_CFLAGS="`$PKG_CONFIG --cflags libxml-2.0`"
    XML_LIBS="`$PKG_CONFIG --libs libxml-2.0`"
    AC_MSG_RESULT(found)
else
    AC_MSG_ERROR(could not find libxml2)
fi

AC_SUBST(XML_LIBS)
AC_SUBST(XML_CFLAGS)


dnl have_gnome=false
dnl GNOME_INIT_HOOK([
dnl 	have_gnome=true
dnl 	AC_DEFINE(ENABLE_GNOME)
dnl ])
dnl AM_CONDITIONAL(GNOME_SUPPORT, $have_gnome)

dnl AC_ARG_ENABLE(bonobo, [  --enable-bonobo            enable bonobo support],,
dnl   [enable_bonobo=no])
dnl have_bonobo=false
dnl if test x$enable_bonobo != xno; then
dnl   AM_PATH_BONOBO(0.27, have_bonobo=true)
dnl fi
dnl AM_CONDITIONAL(BONOBO_SUPPORT, $have_bonobo)

dnl AC_ARG_ENABLE(gnomedb, [  --enable-gnomedb           enable gnome-db support],,
dnl   [enable_gnomedb=yes])
dnl have_gnomedb=false
dnl if test x$enable_gnomedb != xno && test x$have_gnome != xfalse; then
dnl   AC_PATH_PROG(GNOMEDB_CONFIG, gnomedb-config, no)
dnl   AC_MSG_CHECKING(for gnome-db)
dnl   if test x$GNOMEDB_CONFIG != xno; then
dnl     have_gnomedb=true
dnl     GNOMEDB_CFLAGS="`gnomedb-config --cflags`"
dnl     GNOMEDB_LIBS="`gnomedb-config --libs`"
dnl     AC_MSG_RESULT(found)
dnl   else
dnl     AC_MSG_RESULT(not found)
dnl   fi
dnl fi
dnl AM_CONDITIONAL(GNOMEDB_SUPPORT, $have_gnomedb)
dnl AC_SUBST(GNOMEDB_LIBS)
dnl AC_SUBST(GNOMEDB_CFLAGS)

dnl GNOME_COMPILE_WARNINGS

AC_CHECK_PROG(GTKDOC, gtkdoc-mkdb, true, false)
AM_CONDITIONAL(HAVE_GTK_DOC, $GTKDOC)

dnl gettext stuff ... there is no message catalog for libglade -- libglade
dnl provides translation for the XML files it reads in.
ALL_LINGUAS=""
AM_GNOME_GETTEXT
BUILD_INCLUDED_LIBINTL=no
AC_SUBST(BUILD_INCLUDED_LIBINTL)

AC_OUTPUT([Makefile
libglade.spec
macros/Makefile
intl/Makefile
po/Makefile.in
glade/Makefile
doc/Makefile
libglade-2.0.pc])

echo "This is the development branch of libglade"
echo "If you want something that works with gtk+ 1.2, checkout the"
echo "libglade-1-0 branch with the following command"
echo "  cvs update -r libglade-1-0 ."
