AC_INIT(test-libglade.c)
AM_CONFIG_HEADER(config.h)

AM_INIT_AUTOMAKE(libglade, 0.1)

dnl get the GNOME macros
AM_ACLOCAL_INCLUDE(macros)

AC_ARG_ENABLE(debug, [  --enable-debug             enable debugging output],,
  [enable_debug=no])

if test "x$enable_debug" != xno; then
  AC_DEFINE(DEBUG)
fi

AC_PROG_CC
AC_ISC_POSIX
AC_HEADER_STDC
AC_ARG_PROGRAM

AM_PROG_LIBTOOL

AM_PATH_GTK(1.2.0)

dnl for glade-keys.c
AC_PROG_AWK
GDK_KEYSYMS="`$GTK_CONFIG --prefix`/include/gdk/gdkkeysyms.h"
AC_SUBST(GDK_KEYSYMS)

AC_PATH_PROG(XML_CONFIG,xml-config,no)
if test x$XML_CONFIG = xno; then
  AC_MSG_ERROR(Couldn't find xml-config)
fi
XML_LIBS=`xml-config --libs`
XML_CFLAGS=`xml-config --cflags`
AC_SUBST(XML_LIBS)
AC_SUBST(XML_CFLAGS)

have_gnome=false
GNOME_INIT_HOOK([
	have_gnome=true
	AC_DEFINE(ENABLE_GNOME)
])
AM_CONDITIONAL(GNOME_SUPPORT, $have_gnome)
dnl gnumeric doesn't use this configure script, so LIBGLADE_FULLDIST is
dnl false when building libglade as part of gnumeric.
AM_CONDITIONAL(LIBGLADE_FULLDIST, true)
GNOME_COMPILE_WARNINGS

AC_CHECK_PROG(GTKDOC, gtkdoc-mkdb, true, false)
AM_CONDITIONAL(HAVE_GTK_DOC, $GTKDOC)

AC_OUTPUT(Makefile macros/Makefile glade/Makefile doc/Makefile libglade-config)

